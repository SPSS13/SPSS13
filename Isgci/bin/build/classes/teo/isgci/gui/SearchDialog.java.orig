/*
 * Select the naming preference for graphclasses.
 *
 * $Header: /home/ux/CVSROOT/teo/teo/isgci/gui/SearchDialog.java,v 2.0 2011/09/25 12:37:13 ux Exp $
 *
 * This file is part of the Information System on Graph Classes and their
 * Inclusions (ISGCI) at http://www.graphclasses.org.
 * Email: isgci@graphclasses.org
 */

package teo.isgci.gui;

import java.awt.Container;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Collections;
import java.util.List;

import javax.swing.ButtonGroup;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JDialog;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.ListSelectionModel;

import teo.isgci.gc.GraphClass;
import teo.isgci.util.LessLatex;

import com.mxgraph.model.mxCell;

public class SearchDialog extends JDialog implements ActionListener {
    /**
     * 
     */
    private static final long serialVersionUID = 840964204742364690L;
    protected ISGCIMainFrame parent;
    protected ButtonGroup group;
    protected JCheckBox basicBox, derivedBox, forbiddenBox;
    protected JButton searchButton, cancelButton;
    protected NodeList<GraphClass> classesList;


    public SearchDialog(ISGCIMainFrame parent) {
        super(parent, "Search for a graphclass", true);
        this.parent = parent;
        group = new ButtonGroup();
        Container content = getContentPane();

        GridBagLayout gridbag = new GridBagLayout();
        GridBagConstraints c = new GridBagConstraints();
        content.setLayout(gridbag);

        c.gridwidth = GridBagConstraints.REMAINDER;
        c.insets = new Insets(5, 5, 5, 5);
        c.weighty = 1.0;
        c.weightx = 1.0;
        c.fill = GridBagConstraints.BOTH;
        classesList = new NodeList<GraphClass>(ISGCIMainFrame.latex);
        classesList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        JScrollPane scroller = new JScrollPane(classesList);
        gridbag.setConstraints(scroller, c);
        content.add(scroller);
        
        c.insets = new Insets(0, 5, 0, 0);
        c.weightx = 0.0;
        c.weighty = 0.0;
        c.fill = GridBagConstraints.NONE;
        c.anchor = GridBagConstraints.WEST;
        c.fill = GridBagConstraints.BOTH;
    
        JPanel p = new JPanel();
        searchButton = new JButton("Search");
        cancelButton = new JButton("Cancel");
        p.add(searchButton);
        p.add(cancelButton);
        c.insets = new Insets(5, 0, 5, 0);
        gridbag.setConstraints(p, c);
        content.add(p);

        searchButton.addActionListener(this);
        cancelButton.addActionListener(this);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
    
        List<GraphClass> names = parent.graphCanvas.getClasses();
        if (!names.isEmpty()) {
            Collections.sort(names, new LessLatex());
            classesList.setListData(names);
        }
        pack();
        setSize(300, 350);
    
    }


    protected void closeDialog() {
        setVisible(false);
        dispose();
    }

    /**
     * @author leo
     * @date 14.06
     * @annotation reworked to work with the mxcanvas
     */
    public void actionPerformed(ActionEvent event) {
        Object source = event.getSource();
        if (source == cancelButton) {
            closeDialog();
        } else if (source == searchButton) {
            mxCell cell = (mxCell) parent.graphCanvas.findNode(
<<<<<<< HEAD
                    ((NodeList<GraphClass>)classesList).getSelectedNode());
            parent.graphCanvas.setSelectedCell(cell);
=======
                    classesList.getSelectedNode(), true);
            parent.graphCanvas.markOnly(cell);
>>>>>>> 4124c89fa615a3a2d51598f30a3ca1b15a2ce182
            parent.graphCanvas.centerNode(cell);
            closeDialog();
        }
    }
}

/* EOF */
